menu "OpenAMP Support"

config COMPONENTS_LIBMETAL
	bool "Libmetal Support"
	default n

config COMPONENTS_OPENAMP
	bool "OpenAMP Framework Support"
	depends on COMPONENTS_LIBMETAL && DRIVERS_MSGBOX
	default n

if COMPONENTS_OPENAMP
	config AMP_SLAVE_MODE
		bool "salve mode(only support slave mode)"
		default y

	config MBOX_CHANNEL
		int "Using msgbox channel"
		range 0 7
		default 0

	config MBOX_QUEUE_LENGTH
		int "Config msgbox recv queue len"
		range 1 1024
		default 16

	config VDEV_RESERVED_MEM
		bool "Virtio device reserved memory"
		depends on ARCH_RISCV_PMP && PMP_EARLY_ENABLE
		default y
		help
		  OpenAMP need to specify reserved memory for normal rpmsg communication
		  when MPU(eg: PMP hardware in RISC-V) enable and turn on early. If you
		  don't specify the reserved memory, system will possibly crash because of MPU.
		  And the parameter(address, size) of reserved memory is need to be same with
		  the peer entity of rpmsg communication.

	if VDEV_RESERVED_MEM
		config VDEV_BUF_RESERVED_MEM_ADDR
			hex "Virtio device buffer reserved memory addr"
			default 0x42400000

		config VDEV_BUF_RESERVED_MEM_SIZE
			hex "Virtio device buffer reserved memory size"
			default 0x40000

		config VDEV_VRING0_RESERVED_MEM_ADDR
			hex "Virtio device vring0 reserved memory addr"
			default 0x42440000

		config VDEV_VRING0_RESERVED_MEM_SIZE
			hex "Virtio device vring0 reserved memory size"
			default 0x2000

		config VDEV_VRING1_RESERVED_MEM_ADDR
			hex "Virtio device vring1 reserved memory addr"
			default 0x42442000

		config VDEV_VRING1_RESERVED_MEM_SIZE
			hex "Virtio device vring1 reserved memory size"
			default 0x2000
	endif # VIRTIO_DEV_RESERVED_MEM

	config RPMSG_DEMO
		bool "rpmsg simple demo"
		default n

	config RPMSG_NOTIFY
		bool "rpmsg notify driver"
		default n

	config RPMSG_SPEEDTEST
		bool "rpmsg speedtest demo"
		default n

	config RPMSG_TEST
		bool "rpmsg test demo"
		default n

	menuconfig RPMSG_CLIENT
		bool "rpmsg client driver"
		default n
	if RPMSG_CLIENT
		config RPMSG_CLIENT_TEST
			depends on COMPONENTS_MD5
			bool "Export client test cmd"
			default n
		config RPMSG_CLIENT_QUEUE_SIZE
			int "rpmsg rx queue size"
			range 0 128
			default 16
		config RPMSG_CLIENT_DEBUG
			bool "printf debug info"
			default n
	endif

	menuconfig RPMSG_HEARBEAT
		bool "rpmsg hearbeat driver"
		default n
	if RPMSG_HEARBEAT
		config RPMSG_REMOTE_NAME
		string "remoteproc master name."
		default "e907_rproc"
		help
			remoteproc master name.
			it will be defined in device tree in major core.
			e.g e907_rproc@0 { ... }; is defined in dts.
			e907_rproc is the master name.
	endif

	config SLAVE_EARLY_BOOT
		bool "system will early boot before master rproc ready"
		default n

	menuconfig AMP_TRACE_SUPPORT
		bool "openamp trace Support"
		default n
		help
		  This is a demo thar introduces how to use RPBuf to exchange large data
		  with remote processor.
	if AMP_TRACE_SUPPORT
	config AMP_TRACE_BUF_SIZE
		hex "config trace buffer size"
		default 0x1000
	endif

	menuconfig MULTI_OPENAMP_SUPPORT
		bool "multi openamp support"
		default n
	if MULTI_OPENAMP_SUPPORT
		config MULTI_OPENAMP_SUPPORT_RV
			bool "support toriscv rproc"
		if MULTI_OPENAMP_SUPPORT_RV
		choice
			prompt "support torv rproc"
		config OPENAMP_TORV_RPROC_MASTER
			bool "master"
		config OPENAMP_TORV_RPROC_SLAVE
			bool "slave"
		endchoice

		config TORV_MBOX_CHANNEL
			int "Using msgbox channel"
			range 0 7
			default 0
		config TORV_MBOX_QUEUE_LENGTH
			int "Config msgbox recv queue len"
			range 1 1024
			default 16
		endif

		config MULTI_OPENAMP_SUPPORT_DSP
			bool "support todsp rproc"
		if MULTI_OPENAMP_SUPPORT_DSP
		choice
			prompt "support todsp rproc"
		config OPENAMP_TODSP_RPROC_MASTER
			bool "master"
		config OPENAMP_TODSP_RPROC_SLAVE
			bool "slave"
		endchoice

		config TODSP_MBOX_CHANNEL
			int "Using msgbox channel"
			range 0 7
			default 0
		config TODSP_MBOX_QUEUE_LENGTH
			int "Config msgbox recv queue len"
			range 1 1024
			default 16

		endif
	endif

	config AMP_SHARE_IRQ
		bool "openamp share interrupts support"
		select COMPONENTS_OPENAMP_OPEN_AMP
		default n
		help
			Openamp share interrupts support

endif

endmenu

